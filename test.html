<!DOCTYPE html>
<html>
<head>
	<script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
	<script src="./components/show-info.js"></script>
</head>
<script>
	function createCORSRequest(method, url) {
		var xhr = new XMLHttpRequest();
		if ("withCredentials" in xhr) {
			xhr.open(method, url, true);
		} else if (typeof XDomainRequest != "undefined") {
			xhr = new XDomainRequest();
			xhr.open(method, url);
		} else {
			xhr = null;
		}

		xhr.onload = function() {
			console.log(xhr.responseText);
			var json = JSON.parse(xhr.responseText);
			var str = json["_id"] + '\n';
			for (var key in json["payload"])
				if (json["payload"].hasOwnProperty(key)) {
					var val = json["payload"][key];
					str += key + ' -> ' + val + '\n';
				}
			console.log(str);
			console.log(document.getElementById("text").getAttribute("text"));
			document.getElementById("text").setAttribute("text", "value: " + str);
			console.log(json)
		}
  		return xhr;
	}

	function request(){
		var url = "http://104.236.133.46:5000/"
		var xhr = createCORSRequest('GET', url + document.getElementById("endpoint_id").value);
		xhr.send();
		//return JSON.parse(xhr.responseText);
	}

	function request_end(endpoint){
		var url = "http://104.236.133.46:5000/collections/"
		var xhr = createCORSRequest('GET', url + endpoint)
		xhr.send()
	}

	function request_doc(col, doc){
		var url = "http://104.236.133.46:5000/collections/";
		var xhr = createCORSRequest('GET', url + col + "/" + doc);
		xhr.send();
	}
</script>
<body>
		<a-scene>
		  <a-assets>
	                <a-asset-item id="object" src="./models/Tower03_sketchup.obj"></a-asset-item>
	                <a-asset-item id="material" src="./models/Tower03_sketchup.mtl"></a-asset-item>
	            </a-assets>
				<a-camera position="0 2 0">
					<a-cursor color="#4CC3D9" fuse="true" timeout="10"></a-cursor>
				</a-camera>
	     <a-obj-model src="#object" mtl="#material" position="0 0 -2" rotation="0 -55 0 " scale="0.001 0.001 0.001"></a-obj-model>

	      <a-entity id="text"
	        position="0 7 -4"
	        geometry="primitive: plane; width: 8; height: auto"
	        material="color: #0000FF"
	        text="value: ">
	      </a-entity>
		  <a-box show-info id="utilitypole/Adobe" position="0 1 2" rotation="0 45 0" color="#4CC3D9"></a-box>
	      <a-box show-info id="utilitypole/Netflix" position="1.849 3.993 -2.673" scale="0.2 0.2 0.2" rotation="0 45 0" color="#4CC3D9"></a-box>
	      <a-box show-info id="utilitypole/Go Irish" position="0.229 1.294 -2.403" scale="0.2 0.2 0.2" rotation="0 45 0" color="#4CC3D9"></a-box>
	      <a-box show-info id="utilitypole/Tesla" position="6.578 0.831 -3.709" scale="0.2 0.2 0.2" rotation="0 45 0" color="#4CC3D9"></a-box>
	      <a-box show-info id="utilitypole/UFO" position="-1.374 3.964 -2" scale="0.2 0.2 0.2" rotation="0 45 0" color="#4CC3D9"></a-box>
	      <a-box show-info id="utilitypole/Samsug SSI" position="-5.941 0.856 -1.1" scale="0.2 0.2 0.2" rotation="0 45 0" color="#4CC3D9" material="" geometry=""></a-box><a-box position="-5.941 0.856 -1.1" scale="0.2 0.2 0.2" rotation="0 45 0" color="#4CC3D9"></a-box>

	      <a-sky color="#222"></a-sky>
	    </a-scene>

</body>
</html>
